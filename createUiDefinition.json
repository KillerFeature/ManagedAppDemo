{
  "handler": "Microsoft.Compute.MultiVm",
  "version": "0.1.2-preview",
  "parameters": {
    "basics": [
    ],
    "steps": [
      {
        "name": "org",
        "label": "Cloud Governance",
        "subLabel": {
          "preValidation": "Please fill in the Details",
          "postValidation": "We are Done"
        },
        "elements": [
          {
            "name": "environment",
            "type": "Microsoft.Common.OptionsGroup",
            "label": "Select Environment",
            "defaultValue": "Development",
            "toolTip": "Tooltip",
            "constraints": {
              "allowedValues": [
                {
                  "label": "Dev",
                  "value": "dev"
                },
                {
                  "label": "Test",
                  "value": "tst"
                },
                {
                  "label": "Prod",
                  "value": "prod"
                }
              ],
              "required": true
            },
            "visible": true
          },
          {
            "name": "owner",
            "type": "Microsoft.Common.TextBox",
            "label": "Owner Email",
            "defaultValue": "test@test.dk",
            "toolTip": "Enter email here",
            "constraints": {
              "required": true,
              "regex": "^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$",
              "validationMessage": "Only valid email adresses"
            },
            "visible": true
          }
        ]
      },
      {
                "name": "storageConfig",
                "label": "Storage settings",
                "subLabel": {
                    "preValidation": "Configure the infrastructure settings",
                    "postValidation": "Done"
                },
                "bladeTitle": "Storage settings",
                "elements": [
                    {
                        "name": "storageAccounts",
                        "type": "Microsoft.Storage.MultiStorageAccountCombo",
                        "label": {
                            "prefix": "Storage account name prefix",
                            "type": "Storage account type"
                        },
                        "defaultValue": {
                            "type": "Standard_LRS"
                        },
                        "constraints": {
                            "allowedTypes": [
                                "Premium_LRS",
                                "Standard_LRS",
                                "Standard_GRS"
                            ]
                        }
                    }
                ]
            }
    ],
    "outputs": {
      "location": "[location()]",
      "tagValues": {"env": "[steps('org').environment]", "owner":"[steps('org').owner]"},
      "env": "[steps('org').environment]", "owner":"[steps('org').owner]"
    }
  }
}
